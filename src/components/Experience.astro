---
import portfolioData from "../data/portfolio.json";
import type { PortfolioData } from "../types/portfolio";
import { Briefcase, Calendar, MapPin } from "lucide-react";

const { experience } = portfolioData as PortfolioData;
---

<section id="experience" class="py-20 scroll-mt-20 reveal-on-scroll">
  <div class="flex items-center gap-4 mb-16">
    <div class="p-3 rounded-xl bg-indigo-500/10 text-indigo-400 ring-1 ring-indigo-500/20">
        <Briefcase className="w-6 h-6" />
    </div>
    <h2 class="text-3xl font-bold text-white">Experiencia Laboral</h2>
  </div>

  <div class="relative space-y-12 pl-4 md:pl-0">
    {/* Timeline Line */}
    <div class="absolute left-4 md:left-36 top-2 bottom-2 w-px bg-linear-to-b from-indigo-500 via-slate-800 to-slate-900 hidden md:block"></div>
    <div class="absolute left-0 top-2 bottom-2 w-px bg-slate-800 md:hidden"></div>

    {experience.map((job) => (
      <div class="relative flex flex-col md:flex-row gap-8 group">
        
        {/* Date (Left side on desktop) */}
        <div class="md:w-36 md:text-right shrink-0 md:pr-8">
             <div class="sticky top-24">
                 <span class="inline-flex items-center gap-2 text-sm font-semibold text-indigo-300 py-1.5 px-3 rounded-lg bg-indigo-500/10 border border-indigo-500/20">
                    <Calendar className="w-3.5 h-3.5" />
                    {job.date.split(' - ')[0]} 
                 </span>
                 <div class="text-xs text-slate-400 mt-2 hidden md:block pl-1">
                    {job.date.split(' - ')[1] || 'Presente'}
                 </div>
             </div>
        </div>

        {/* Timeline Dot */}
        <div class="absolute -left-1 md:left-36 w-2.5 h-2.5 bg-slate-950 rounded-full border-2 border-indigo-500 transform md:-translate-x-1.25 mt-6 z-10 group-hover:scale-150 group-hover:bg-indigo-400 group-hover:border-indigo-400 transition-all duration-300 shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div>

        {/* Content */}
        <div class="flex-1 md:pl-8">
            <div class="relative p-8 rounded-2xl bg-slate-900/40 border border-slate-800/60 hover:border-indigo-500/30 hover:bg-slate-900/60 transition-all duration-300 group-hover:shadow-lg group-hover:shadow-indigo-500/5">
                {/* Glow Effect */}
                <div class="absolute inset-0 bg-linear-to-br from-indigo-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"></div>
                
                <div class="relative z-10">
                    <div class="flex flex-col sm:flex-row justify-between sm:items-start gap-4 mb-6">
                        <div>
                            <h3 class="text-xl font-bold text-white group-hover:text-indigo-300 transition-colors">
                                {job.role}
                            </h3>
                            <div class="text-lg text-slate-300 font-medium mt-1">
                                {job.company}
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-sm text-slate-400 px-3 py-1 rounded-full bg-slate-950/50 border border-slate-800/50 w-fit">
                            <MapPin className="w-3.5 h-3.5 text-indigo-400" />
                            {job.type}
                        </div>
                    </div>

                    <p class="text-slate-400 leading-relaxed mb-6 text-pretty">
                        {job.description}
                    </p>

                    <div class="flex flex-wrap gap-2">
                        {job.skills.map((skill) => (
                            <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-slate-800/80 text-slate-300 border border-slate-700/80 hover:border-indigo-500/30 hover:text-indigo-300 hover:bg-slate-800 transition-all duration-300 cursor-default">
                                {skill}
                            </span>
                        ))}
                    </div>
                </div>
            </div>
        </div>
      </div>
    ))}
  </div>
</section>
